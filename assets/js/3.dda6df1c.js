(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{209:function(t,s,a){t.exports=a.p+"assets/img/shallowBox.99003330.png"},210:function(t,s,a){t.exports=a.p+"assets/img/shallowBox-result.69630a91.png"},211:function(t,s,a){t.exports=a.p+"assets/img/box-result.a9188ece.png"},212:function(t,s,a){t.exports=a.p+"assets/img/ObservableValue-method.de0c562f.png"},213:function(t,s,a){t.exports=a.p+"assets/img/ObservableValue-set.9b17e59b.png"},223:function(t,s,a){"use strict";a.r(s);var e=a(17),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"mobx-æºç åˆ†æ-shallowboxã€boxã€observablevalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mobx-æºç åˆ†æ-shallowboxã€boxã€observablevalue","aria-hidden":"true"}},[t._v("#")]),t._v(" Mobx æºç åˆ†æ - shallowBoxã€boxã€ObservableValue")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/20190822.html"}},[t._v("ä¸Šæ–‡")]),t._v("æåˆ°ï¼Œ"),e("code",[t._v("observable")]),t._v(" ä¸Šç»‘å®šäº† 13 ä¸ªæ–¹æ³•ã€‚æ­¤ç¯‡æ–‡ç« ä¼šé‡ç‚¹è®²è§£ "),e("code",[t._v("shallowBox")]),t._v(" å’Œ "),e("code",[t._v("box")]),t._v("ã€‚")],1),t._v(" "),e("h2",{attrs:{id:"shallowboxã€box"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shallowboxã€box","aria-hidden":"true"}},[t._v("#")]),t._v(" shallowBoxã€box")]),t._v(" "),e("p",[t._v("å½“è°ƒç”¨ "),e("code",[t._v("observable.shallowBox")]),t._v(" æ—¶ï¼Œ"),e("code",[t._v("mobx")]),t._v(" ä¼šç»™å‡ºåºŸå¼ƒè­¦å‘Šï¼Œå¹¶å¸®ä½ è½¬æ¢æˆ "),e("code",[t._v("observable.box")]),t._v("ï¼Œåªæ˜¯åœ¨è½¬æ¢çš„æ—¶å€™ï¼Œä¼šç»™ "),e("code",[t._v("observable.box")]),t._v(" ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•° "),e("code",[t._v("{ name, deep: false }")]),t._v("ï¼Œè¿™ä¸ªå‚æ•°çš„ä½œç”¨ä¾¿æ˜¯å‘Šè¯‰ "),e("code",[t._v("observable.box")]),t._v(" åœ¨å®ä¾‹åŒ– "),e("code",[t._v("ObservableValue")]),t._v(" æ—¶ï¼Œä½¿ç”¨ "),e("code",[t._v("referenceEnhancer")]),t._v("ã€‚")]),t._v(" "),e("p",[e("code",[t._v("referenceEnhancer")]),t._v(" ç¦ç”¨è‡ªåŠ¨çš„ "),e("code",[t._v("observable")]),t._v(" è½¬æ¢ï¼Œåªæ˜¯åˆ›å»ºä¸€ä¸ª "),e("code",[t._v("observable")]),t._v(" å¼•ç”¨ã€‚")]),t._v(" "),e("p",[e("img",{attrs:{src:a(209),alt:"img"}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(210),alt:"img"}})]),t._v(" "),e("p",[t._v("ç›¸åçš„ï¼Œå¦‚æœæˆ‘ä»¬è°ƒç”¨ "),e("code",[t._v("observable.box")]),t._v("ï¼Œå¹¶ç»™å…¶ä¼ å…¥ "),e("code",[t._v("{ deep: true }")]),t._v("ã€‚")]),t._v(" "),e("p",[e("img",{attrs:{src:a(211),alt:"img"}})]),t._v(" "),e("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œ"),e("code",[t._v("value")]),t._v(" è¿™æ—¶å·²ç»æ˜¯ "),e("code",[t._v("ObservableValue")]),t._v(" çš„å®ä¾‹ã€‚")]),t._v(" "),e("p",[t._v("æ‰“å¼€ "),e("code",[t._v("types/observablevalue.ts")]),t._v(" æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å‘å¤–ç•Œæš´éœ² "),e("code",[t._v("ObservableValue")]),t._v(" ç±»å’Œ "),e("code",[t._v("isObservableValue")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),e("h2",{attrs:{id:"observablevalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#observablevalue","aria-hidden":"true"}},[t._v("#")]),t._v(" ObservableValue")]),t._v(" "),e("h3",{attrs:{id:"æ„é€ å‡½æ•°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ„é€ å‡½æ•°","aria-hidden":"true"}},[t._v("#")]),t._v(" æ„é€ å‡½æ•°")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("ObservableValue")]),t._v(" ç±»ç»§æ‰¿ "),e("code",[t._v("Atom")]),t._v(" ç±»ã€‚")]),t._v(" "),e("li",[e("code",[t._v("ObservableValue")]),t._v(" ç±»çš„æ„é€ å‡½æ•°æ¥æ”¶ 5 ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º "),e("code",[t._v("value")]),t._v("ã€"),e("code",[t._v("enhancer")]),t._v("ã€"),e("code",[t._v("name")]),t._v("ã€"),e("code",[t._v("notifySpy")]),t._v(" å’Œ "),e("code",[t._v("equals")]),t._v("ï¼Œå…¶ä¸­ "),e("code",[t._v("name")]),t._v(" ä¸ "),e("code",[t._v("equals")]),t._v(" å­˜åœ¨é»˜è®¤å€¼ã€‚"),e("code",[t._v("name")]),t._v("æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯ä¸€ä¸ª "),e("code",[t._v("id")]),t._v("ï¼Œ"),e("code",[t._v("equals")]),t._v(" çš„é»˜è®¤å€¼ä¸º "),e("code",[t._v("comparer.default")]),t._v("ï¼Œ"),e("code",[t._v("comparer.default")]),t._v(" ä¸»è¦ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ã€‚")]),t._v(" "),e("li",[t._v("è°ƒç”¨ä¸‹çˆ¶ç±» "),e("code",[t._v("Atom")]),t._v(" æ„é€ å‡½æ•°ï¼Œå¹¶æŠŠ "),e("code",[t._v("value")]),t._v(" å€¼è®¾ä¸ºä¼ é€’è¿›æ¥çš„ "),e("code",[t._v("enhancer")]),t._v(" å‡½æ•°æ‰§è¡Œçš„ç»“æœã€‚")]),t._v(" "),e("li",[t._v("åˆ¤æ–­æ˜¯å¦éœ€è¦ç›‘å¬å’Œå…¨å±€çš„ç›‘å¬å™¨ "),e("code",[t._v("spy")]),t._v(" æ•°é‡ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å‘é€ä¸€ä¸ªäº‹ä»¶ã€‚")]),t._v(" "),e("li",[t._v("ç±»ä¸­å®šä¹‰äº†è®¸å¤šæ–¹æ³•ï¼Œæ¯”å¦‚ "),e("code",[t._v("dehanceValue")]),t._v("ã€"),e("code",[t._v("set")]),t._v("ã€"),e("code",[t._v("prepareNewValue")]),t._v("ã€"),e("code",[t._v("setNewValue")]),t._v("ã€"),e("code",[t._v("get")]),t._v("ã€"),e("code",[t._v("intercept")]),t._v("ã€"),e("code",[t._v("observe")]),t._v("ã€"),e("code",[t._v("toJSON")]),t._v("ã€"),e("code",[t._v("toString")]),t._v(" å’Œ "),e("code",[t._v("valueOf")]),t._v("ã€‚")]),t._v(" "),e("li",[t._v("ç±»çš„åŸå‹ä¸Šä¼šé’ˆå¯¹å¯¹è±¡è½¬æˆåŸå§‹å€¼æ—¶ï¼Œè°ƒç”¨ "),e("code",[t._v("valueOf")]),t._v(" æ–¹æ³•ã€‚")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObservableValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("primitiveSymbol")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObservableValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("valueOf\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"æ–¹æ³•"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ³•","aria-hidden":"true"}},[t._v("#")]),t._v(" æ–¹æ³•")]),t._v(" "),e("p",[e("code",[t._v("ObservableValue")]),t._v(" ç±» 8 ä¸ªå…¬å…±æ–¹æ³•ï¼Œ2 ä¸ªç§æœ‰æ–¹æ³•ã€‚")]),t._v(" "),e("p",[e("img",{attrs:{src:a(212),alt:"img"}})]),t._v(" "),e("h4",{attrs:{id:"observe"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#observe","aria-hidden":"true"}},[t._v("#")]),t._v(" observe")]),t._v(" "),e("p",[t._v("æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•° "),e("code",[t._v("listener")]),t._v(" å’Œæ˜¯å¦ç«‹å³è°ƒç”¨ "),e("code",[t._v("fireImmediately")]),t._v("ã€‚å¦‚æœ "),e("code",[t._v("fireImmediately")]),t._v(" ä¸º "),e("code",[t._v("true")]),t._v("ï¼Œåˆ™ç«‹å³è°ƒç”¨ "),e("code",[t._v("listener")]),t._v(" å‡½æ•°ã€‚")]),t._v(" "),e("p",[t._v("è°ƒç”¨ "),e("code",[t._v("registerListener")]),t._v(" æ³¨å†Œç›‘å¬å™¨ï¼Œæ–¹æ³•å†…éƒ¨å¤§éƒ¨åˆ†ä¸ "),e("code",[t._v("registerInterceptor")]),t._v(" å®ç°ç›¸åŒã€‚")]),t._v(" "),e("h4",{attrs:{id:"intercept"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#intercept","aria-hidden":"true"}},[t._v("#")]),t._v(" intercept")]),t._v(" "),e("p",[t._v("ç”¨æ¥åœ¨ä»»ä½•å˜åŒ–åº”ç”¨å‰å°†å…¶æ‹¦æˆªã€‚")]),t._v(" "),e("p",[t._v("æ–¹æ³•å†…éƒ¨è°ƒç”¨ "),e("code",[t._v("registerInterceptor")]),t._v("ï¼Œ"),e("code",[t._v("registerInterceptor")]),t._v(" å‡½æ•°å†…éƒ¨ä¼šåˆ¤æ–­å®ä¾‹ä¸Šæ˜¯å¦å­˜åœ¨ "),e("code",[t._v("interceptors")]),t._v("ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™èµ‹ä¸º "),e("code",[t._v("[]")]),t._v("ï¼Œå¹¶æŠŠ "),e("code",[t._v("handler")]),t._v(" å­˜å…¥ "),e("code",[t._v("interceptors")]),t._v("ã€‚æœ€åè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ã€‚")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" registerInterceptor"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    interceptable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" IInterceptable"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    handler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" IInterceptor"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Lambda "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" idx "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" interceptors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("idx "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" interceptors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("splice")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("idx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("func"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Lambda")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Lambda "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" invoked "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("invoked"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n        invoked "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("func "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" any"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br")])]),e("h4",{attrs:{id:"get"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get","aria-hidden":"true"}},[t._v("#")]),t._v(" get")]),t._v(" "),e("p",[t._v("è¿”å›å½“å‰å€¼ã€‚")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// types/observablevalue.ts")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportObserved")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("dehanceValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// core/atom.ts")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportObserved")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportObserved")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// core/observable.ts")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportObserved")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("observable")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("h5",{attrs:{id:"reportobserved"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reportobserved","aria-hidden":"true"}},[t._v("#")]),t._v(" reportObserved")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("é¦–å…ˆè·å–å…¨å±€å¯¹è±¡ä¸­ "),e("code",[t._v("trackingDerivation")]),t._v("ï¼Œå¹¶èµ‹ç»™ "),e("code",[t._v("derivation")]),t._v("ã€‚ä»¥ "),e("code",[t._v("autorun")]),t._v(" ä¸¾ä¾‹ï¼Œå½“ä½¿ç”¨ "),e("code",[t._v("autorun")]),t._v(" çš„æ—¶å€™ï¼Œä¼šåœ¨å…¨å±€å¯¹è±¡ä¸­ "),e("code",[t._v("trackingDerivation")]),t._v(" èµ‹å®ä¾‹åŒ–åçš„ "),e("code",[t._v("Reaction")])])]),t._v(" "),e("li",[e("p",[t._v("åˆ¤æ–­ "),e("code",[t._v("derivation")]),t._v(" æ˜¯å¦æœ‰å€¼")]),t._v(" "),e("ul",[e("li",[t._v("æœ‰ï¼Œåˆ¤æ–­ "),e("code",[t._v("derivation")]),t._v(" ä¸Š "),e("code",[t._v("runId")]),t._v(" ä¸å®ä¾‹çš„ "),e("code",[t._v("lastAccessedBy")]),t._v(" æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰åˆ™ä»£è¡¨ä¾èµ–å·²ç»å»ºç«‹è¿‡ï¼Œä¸éœ€è¦å†æ¬¡åˆ›å»ºï¼Œæ²¡æœ‰åˆ™æŠŠ "),e("code",[t._v("derivation.runId")]),t._v(" èµ‹ç»™ "),e("code",[t._v("lastAccessedBy")]),t._v("ï¼Œç„¶åæŠŠå®ä¾‹æ”¾å…¥ "),e("code",[t._v("derivation")]),t._v("ã€‚åˆ¤æ–­å½“å‰å®ä¾‹æ˜¯å¦å·²å¤„äºç›‘å¬çŠ¶æ€ï¼Œå¦‚æœå·²ç»å¤„äºï¼Œåˆ™è¿”å› "),e("code",[t._v("true")]),t._v("ï¼Œå¦‚æœä¸æ˜¯åˆ™æŠŠå®ä¾‹ä¸Š "),e("code",[t._v("isBeingObserved")]),t._v(" å€¼æ”¹ä¸º "),e("code",[t._v("true")]),t._v("ï¼Œå¹¶è°ƒç”¨å®ä¾‹çš„ "),e("code",[t._v("onBecomeObserved")]),t._v(" æ–¹æ³•")]),t._v(" "),e("li",[t._v("æ— ï¼Œä¸”å®ä¾‹ä¸Šæ—  "),e("code",[t._v("observers")]),t._v(" ï¼Œå½“å‰å·²å¤„äºäº‹åŠ¡ä¸­ï¼Œåˆ™æŠŠå®ä¾‹æ¨å…¥å…¨å±€ä¸å†è¢«è§‚å¯Ÿé˜Ÿåˆ— "),e("code",[t._v("pendingUnobservations")])]),t._v(" "),e("li",[t._v("æ— ï¼Œä¸”å®ä¾‹ä¸Šæœ‰ "),e("code",[t._v("observers")]),t._v(" æˆ–è€…å½“å‰æœªå¤„äºäº‹åŠ¡ä¸­ï¼Œç›´æ¥è¿”å› "),e("code",[t._v("false")])])])])]),t._v(" "),e("h4",{attrs:{id:"set"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#set","aria-hidden":"true"}},[t._v("#")]),t._v(" set")]),t._v(" "),e("p",[t._v("æ›¿æ¢å½“å‰å­˜å‚¨çš„å€¼å¹¶é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…ã€‚")]),t._v(" "),e("p",[e("img",{attrs:{src:a(213),alt:"img"}})]),t._v(" "),e("ol",[e("li",[t._v("æ–¹æ³•å†…éƒ¨é¦–å…ˆå–åˆ°ä»¥å‰çš„å€¼ "),e("code",[t._v("oldValue")]),t._v("ï¼Œç„¶åè°ƒç”¨ "),e("code",[t._v("prepareNewValue")]),t._v(" æ–¹æ³•ç”Ÿæˆæ–°å€¼ "),e("code",[t._v("newValue")]),t._v("ã€‚")]),t._v(" "),e("li",[t._v("åˆ¤æ–­ "),e("code",[t._v("newValue")]),t._v(" æ˜¯å¦ç­‰äº "),e("code",[t._v("globalState.UNCHANGED")]),t._v("ï¼Œå¦‚æœç­‰äºä»€ä¹ˆéƒ½ä¸åšï¼Œå¦‚æœä¸ç­‰äºï¼Œåˆ™åˆ¤æ–­æ˜¯å¦æœ‰ç›‘å¬å™¨ "),e("code",[t._v("spy")]),t._v("ï¼Œæœ‰åˆ™å‘é€ "),e("code",[t._v("spyReportStart")]),t._v(" äº‹ä»¶ï¼Œæ²¡æœ‰åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚")]),t._v(" "),e("li",[t._v("è°ƒç”¨ "),e("code",[t._v("setNewValue")]),t._v(" æ–¹æ³•")]),t._v(" "),e("li",[t._v("æœ‰ç›‘å¬å™¨åˆ™å‘é€ "),e("code",[t._v("spyReportEnd")]),t._v(" äº‹ä»¶")])]),t._v(" "),e("h4",{attrs:{id:"tojson"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tojson","aria-hidden":"true"}},[t._v("#")]),t._v(" toJSON")]),t._v(" "),e("p",[t._v("è¿”å› "),e("code",[t._v("this.get()")])]),t._v(" "),e("h4",{attrs:{id:"setnewvalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setnewvalue","aria-hidden":"true"}},[t._v("#")]),t._v(" setNewValue")]),t._v(" "),e("ol",[e("li",[t._v("åŸæ¥çš„å€¼æ›´æ–°æˆä¼ å…¥çš„å€¼")]),t._v(" "),e("li",[t._v("è°ƒç”¨ "),e("code",[t._v("reportChanged")]),t._v(" å‡½æ•°")]),t._v(" "),e("li",[t._v("åˆ¤æ–­æ˜¯å¦æœ‰ç›‘å¬å™¨ "),e("code",[t._v("listener")]),t._v("ï¼Œå¦‚æœæœ‰ï¼Œè°ƒç”¨ "),e("code",[t._v("notifyListeners")]),t._v(" æ–¹æ³•")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportChanged")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼€å§‹å¤„ç†äº‹åŠ¡ï¼ŒæŠŠå…¨å±€ inBatch å€¼ + 1")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("startBatch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// derivationã€reaction")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("propagateChanged")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»“æŸå¤„ç†äº‹åŠ¡")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("endBatch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("h5",{attrs:{id:"propagatechanged"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#propagatechanged","aria-hidden":"true"}},[t._v("#")]),t._v(" propagateChanged")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("propagateChanged")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("observable")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ol",[e("li",[t._v("åˆ¤æ–­å½“å‰ "),e("code",[t._v("observable.lowestObserverState")]),t._v(" ä¸ "),e("code",[t._v("IDerivationState.STALE")]),t._v(" æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰åˆ™ä»€ä¹ˆä¹Ÿä¸åšã€‚"),e("code",[t._v("IDerivationState.STALE")]),t._v(" æ„å‘³ç€è‡ªä»æœ€åä¸€æ¬¡çš„è®¡ç®—å’Œè¡ç”Ÿä»¥æ¥ï¼Œå€¼å·²ç»å‘ç”Ÿæ”¹å˜ï¼Œä¸‹ä¸€æ¬¡éœ€è¦çš„æ—¶å€™éœ€è¦é‡æ–°è®¡ç®—")]),t._v(" "),e("li",[e("code",[t._v("IDerivationState.STALE")]),t._v(" èµ‹å€¼ç»™ "),e("code",[t._v("observable.lowestObserverState")])]),t._v(" "),e("li",[t._v("å–åˆ° "),e("code",[t._v("observable.observers")]),t._v("ï¼Œå¦‚æœæœ‰ï¼Œåˆ™éå†æ¯ä¸€é¡¹ï¼Œå¹¶åˆ¤æ–­æ¯ä¸€é¡¹çš„ "),e("code",[t._v("dependenciesState")]),t._v(" ä¸ "),e("code",[t._v("IDerivationState.UP_TO_DATE")]),t._v(" æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœä¸ç­‰ï¼Œåˆ™æŠŠæ¯ä¸€é¡¹çš„ "),e("code",[t._v("dependenciesState")]),t._v(" å…¨éƒ½è®¾ç½®ä¸º "),e("code",[t._v("IDerivationState.STALE")]),t._v("ã€‚å¦åˆ™è°ƒç”¨ "),e("code",[t._v("onBecomeStale")]),t._v("ï¼Œæ‰§è¡Œæ‰€æœ‰çš„ "),e("code",[t._v("reaction")])])]),t._v(" "),e("h5",{attrs:{id:"endbatch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#endbatch","aria-hidden":"true"}},[t._v("#")]),t._v(" endBatch")]),t._v(" "),e("p",[t._v("åˆ¤æ–­ "),e("code",[t._v("--global.inBatch")]),t._v(" æ˜¯å¦ç­‰äº "),e("code",[t._v("0")]),t._v("ï¼Œå¦‚æœæ˜¯åˆ™ä»€ä¹ˆä¹Ÿä¸åšã€‚å¦åˆ™ï¼Œæ‰§è¡Œæ‰€æœ‰çš„ "),e("code",[t._v("reaction")]),t._v("ã€‚è·å–å…¨å±€æ‰€æœ‰å¾…å–æ¶ˆè§‚å¯Ÿçš„åˆ—è¡¨ï¼ŒæŠŠæ¯ä¸€é¡¹ "),e("code",[t._v("isPendingUnobservation")]),t._v(" éƒ½è®¾ç½®ä¸º "),e("code",[t._v("false")]),t._v("ã€‚å¦‚æœ "),e("code",[t._v("observable.observers.length")]),t._v(" ä¸º "),e("code",[t._v("0")]),t._v("ï¼Œä¸” "),e("code",[t._v("observable")]),t._v(" å¤„äºè§‚å¯ŸçŠ¶æ€ï¼Œåˆ™æ ‡è®° "),e("code",[t._v("observable")]),t._v(" ä¸ºä¸å¯è§‚å¯Ÿã€‚å¦‚æœ "),e("code",[t._v("observable")]),t._v(" ä¸º "),e("code",[t._v("ComputedValue")]),t._v(" çš„å®ä¾‹ï¼Œåˆ™è°ƒç”¨ "),e("code",[t._v("observable.suspend")]),t._v("ï¼Œæœ€åæ¸…ç©ºå…¨å±€æ‰€æœ‰å¾…å–æ¶ˆè§‚å¯Ÿåˆ—è¡¨ã€‚")]),t._v(" "),e("h4",{attrs:{id:"tostring"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tostring","aria-hidden":"true"}},[t._v("#")]),t._v(" toString")]),t._v(" "),e("p",[t._v("è¿”å› "),e("code",[t._v("${this.name}[${this.value}]")])]),t._v(" "),e("h4",{attrs:{id:"valueof"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#valueof","aria-hidden":"true"}},[t._v("#")]),t._v(" valueOf")]),t._v(" "),e("p",[t._v("è¿”å› "),e("code",[t._v("toPrimitive(this.get())")])]),t._v(" "),e("h4",{attrs:{id:"dehancevalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dehancevalue","aria-hidden":"true"}},[t._v("#")]),t._v(" dehanceValue")]),t._v(" "),e("p",[t._v("å¦‚æœæœ‰ "),e("code",[t._v("dehancer")]),t._v("ï¼Œåˆ™è¿”å›è°ƒç”¨ "),e("code",[t._v("dehancer")]),t._v(" æ–¹æ³•åçš„å€¼ï¼Œå¦åˆ™ç›´æ¥è¿”å›å€¼")]),t._v(" "),e("h4",{attrs:{id:"preparenewvalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#preparenewvalue","aria-hidden":"true"}},[t._v("#")]),t._v(" prepareNewValue")]),t._v(" "),e("p",[t._v("å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ–¹æ³•å†…éƒ¨ä¼šé¦–å…ˆåˆ¤æ–­æ˜¯å¦æœ‰æ‹¦æˆªå™¨ "),e("code",[t._v("interceptor")]),t._v("ã€‚")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("å¦‚æœæœ‰åˆ™ä¼šä¾æ¬¡è°ƒç”¨æ‹¦æˆªå™¨æ–¹æ³•ï¼Œå¹¶åˆ¤æ–­æ‹¦æˆªå™¨æ˜¯å¦è¿”å›å¯¹è±¡æˆ– nothingï¼Œå¦‚æœä¸æ˜¯åˆ™æŠ¥é”™ï¼›å¦‚æœæ˜¯ nothingï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œä¸‹é¢çš„æ‹¦æˆªå™¨ä¸å†è°ƒç”¨ï¼›å¦‚æœæ˜¯å¯¹è±¡ï¼Œåˆ™ç»§ç»­è°ƒç”¨æ¥ä¸‹æ¥çš„æ‹¦æˆªå™¨ã€‚")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" interceptChange"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    interceptable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" IInterceptable"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    change"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" prevU "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("untrackedStart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" interceptors "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" interceptable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interceptors\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("interceptors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" l "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" interceptors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" l"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                change "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" interceptors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("change"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("invariant")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("change "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("change "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" any"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Intercept handlers should return nothing or a change object"')]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("change"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" change\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("untrackedEnd")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevU"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br")])]),e("p",[t._v("å¦‚æœè¿”å›çš„ "),e("code",[t._v("change")]),t._v(" ä¸º nothingï¼Œåˆ™ç›´æ¥è¿”å› "),e("code",[t._v("globalState.UNCHANGED")]),t._v("ï¼Œå¦åˆ™å– "),e("code",[t._v("change.newValue")]),t._v(" ä½œä¸ºæ–°å€¼ã€‚æ¥ä¸‹æ¥æ–¹æ³•å’Œæ²¡æœ‰æ‹¦æˆªå™¨èµ°çš„é€»è¾‘ä¸€è‡´ã€‚")])]),t._v(" "),e("li",[e("p",[t._v("å¦‚æœæ²¡æœ‰æ‹¦æˆªå™¨ï¼Œåˆ™è°ƒç”¨ "),e("code",[t._v("enhancer")]),t._v(" æ–¹æ³•ç”Ÿæˆæ–°å€¼ï¼Œæœ€ååˆ¤æ–­æ—§å€¼ä¸æ–°å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰è¿”å› "),e("code",[t._v("globalState.UNCHANGED")]),t._v("ï¼Œå¦åˆ™è¿”å›æ–°å€¼ã€‚")])])]),t._v(" "),e("h2",{attrs:{id:"isobservablevalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#isobservablevalue","aria-hidden":"true"}},[t._v("#")]),t._v(" isObservableValue")]),t._v(" "),e("p",[e("code",[t._v("isObservableValue")]),t._v(" å‡½æ•°æ˜¯ "),e("code",[t._v("createInstanceofPredicate")]),t._v(" å‡½æ•°è¿”å›å€¼ã€‚")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" isObservableValue "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createInstanceofPredicate")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ObservableValue"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ObservableValue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"ç»“å°¾è¯­"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç»“å°¾è¯­","aria-hidden":"true"}},[t._v("#")]),t._v(" ç»“å°¾è¯­")]),t._v(" "),e("p",[e("code",[t._v("mox")]),t._v(" æºç é˜…è¯»èµ·æ¥ï¼Œå¾ˆéš¾ç†è§£ï¼Œéœ€è¦ç»†ç»†å“å°ã€‚å¦‚æœè§‰å¾—å†™å¾—å¥½ä¸é”™ï¼Œè¿˜è¯·é¼“åŠ±ä¸‹ï¼Œç‚¹ä¸ªğŸ‘ã€‚")]),t._v(" "),e("comment-comment")],1)}),[],!1,null,null,null);s.default=n.exports}}]);