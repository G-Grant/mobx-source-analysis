(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{209:function(t,s,a){t.exports=a.p+"assets/img/shallowBox.99003330.png"},210:function(t,s,a){t.exports=a.p+"assets/img/shallowBox-result.69630a91.png"},211:function(t,s,a){t.exports=a.p+"assets/img/box-result.a9188ece.png"},212:function(t,s,a){t.exports=a.p+"assets/img/ObservableValue-method.de0c562f.png"},213:function(t,s,a){t.exports=a.p+"assets/img/ObservableValue-set.9b17e59b.png"},223:function(t,s,a){"use strict";a.r(s);var e=a(17),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"mobx-源码分析-shallowbox、box、observablevalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mobx-源码分析-shallowbox、box、observablevalue","aria-hidden":"true"}},[t._v("#")]),t._v(" Mobx 源码分析 - shallowBox、box、ObservableValue")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/20190822.html"}},[t._v("上文")]),t._v("提到，"),e("code",[t._v("observable")]),t._v(" 上绑定了 13 个方法。此篇文章会重点讲解 "),e("code",[t._v("shallowBox")]),t._v(" 和 "),e("code",[t._v("box")]),t._v("。")],1),t._v(" "),e("h2",{attrs:{id:"shallowbox、box"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shallowbox、box","aria-hidden":"true"}},[t._v("#")]),t._v(" shallowBox、box")]),t._v(" "),e("p",[t._v("当调用 "),e("code",[t._v("observable.shallowBox")]),t._v(" 时，"),e("code",[t._v("mobx")]),t._v(" 会给出废弃警告，并帮你转换成 "),e("code",[t._v("observable.box")]),t._v("，只是在转换的时候，会给 "),e("code",[t._v("observable.box")]),t._v(" 传入第二个参数 "),e("code",[t._v("{ name, deep: false }")]),t._v("，这个参数的作用便是告诉 "),e("code",[t._v("observable.box")]),t._v(" 在实例化 "),e("code",[t._v("ObservableValue")]),t._v(" 时，使用 "),e("code",[t._v("referenceEnhancer")]),t._v("。")]),t._v(" "),e("p",[e("code",[t._v("referenceEnhancer")]),t._v(" 禁用自动的 "),e("code",[t._v("observable")]),t._v(" 转换，只是创建一个 "),e("code",[t._v("observable")]),t._v(" 引用。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(209),alt:"img"}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(210),alt:"img"}})]),t._v(" "),e("p",[t._v("相反的，如果我们调用 "),e("code",[t._v("observable.box")]),t._v("，并给其传入 "),e("code",[t._v("{ deep: true }")]),t._v("。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(211),alt:"img"}})]),t._v(" "),e("p",[t._v("可以看到，"),e("code",[t._v("value")]),t._v(" 这时已经是 "),e("code",[t._v("ObservableValue")]),t._v(" 的实例。")]),t._v(" "),e("p",[t._v("打开 "),e("code",[t._v("types/observablevalue.ts")]),t._v(" 文件，该文件向外界暴露 "),e("code",[t._v("ObservableValue")]),t._v(" 类和 "),e("code",[t._v("isObservableValue")]),t._v(" 方法。")]),t._v(" "),e("h2",{attrs:{id:"observablevalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#observablevalue","aria-hidden":"true"}},[t._v("#")]),t._v(" ObservableValue")]),t._v(" "),e("h3",{attrs:{id:"构造函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构造函数","aria-hidden":"true"}},[t._v("#")]),t._v(" 构造函数")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("ObservableValue")]),t._v(" 类继承 "),e("code",[t._v("Atom")]),t._v(" 类。")]),t._v(" "),e("li",[e("code",[t._v("ObservableValue")]),t._v(" 类的构造函数接收 5 个参数，分别为 "),e("code",[t._v("value")]),t._v("、"),e("code",[t._v("enhancer")]),t._v("、"),e("code",[t._v("name")]),t._v("、"),e("code",[t._v("notifySpy")]),t._v(" 和 "),e("code",[t._v("equals")]),t._v("，其中 "),e("code",[t._v("name")]),t._v(" 与 "),e("code",[t._v("equals")]),t._v(" 存在默认值。"),e("code",[t._v("name")]),t._v("没什么好说的，就是一个 "),e("code",[t._v("id")]),t._v("，"),e("code",[t._v("equals")]),t._v(" 的默认值为 "),e("code",[t._v("comparer.default")]),t._v("，"),e("code",[t._v("comparer.default")]),t._v(" 主要用来判断两个值是否相等。")]),t._v(" "),e("li",[t._v("调用下父类 "),e("code",[t._v("Atom")]),t._v(" 构造函数，并把 "),e("code",[t._v("value")]),t._v(" 值设为传递进来的 "),e("code",[t._v("enhancer")]),t._v(" 函数执行的结果。")]),t._v(" "),e("li",[t._v("判断是否需要监听和全局的监听器 "),e("code",[t._v("spy")]),t._v(" 数量，如果有，则发送一个事件。")]),t._v(" "),e("li",[t._v("类中定义了许多方法，比如 "),e("code",[t._v("dehanceValue")]),t._v("、"),e("code",[t._v("set")]),t._v("、"),e("code",[t._v("prepareNewValue")]),t._v("、"),e("code",[t._v("setNewValue")]),t._v("、"),e("code",[t._v("get")]),t._v("、"),e("code",[t._v("intercept")]),t._v("、"),e("code",[t._v("observe")]),t._v("、"),e("code",[t._v("toJSON")]),t._v("、"),e("code",[t._v("toString")]),t._v(" 和 "),e("code",[t._v("valueOf")]),t._v("。")]),t._v(" "),e("li",[t._v("类的原型上会针对对象转成原始值时，调用 "),e("code",[t._v("valueOf")]),t._v(" 方法。")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObservableValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("primitiveSymbol")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObservableValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("valueOf\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方法","aria-hidden":"true"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),e("p",[e("code",[t._v("ObservableValue")]),t._v(" 类 8 个公共方法，2 个私有方法。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(212),alt:"img"}})]),t._v(" "),e("h4",{attrs:{id:"observe"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#observe","aria-hidden":"true"}},[t._v("#")]),t._v(" observe")]),t._v(" "),e("p",[t._v("接收一个回调函数 "),e("code",[t._v("listener")]),t._v(" 和是否立即调用 "),e("code",[t._v("fireImmediately")]),t._v("。如果 "),e("code",[t._v("fireImmediately")]),t._v(" 为 "),e("code",[t._v("true")]),t._v("，则立即调用 "),e("code",[t._v("listener")]),t._v(" 函数。")]),t._v(" "),e("p",[t._v("调用 "),e("code",[t._v("registerListener")]),t._v(" 注册监听器，方法内部大部分与 "),e("code",[t._v("registerInterceptor")]),t._v(" 实现相同。")]),t._v(" "),e("h4",{attrs:{id:"intercept"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#intercept","aria-hidden":"true"}},[t._v("#")]),t._v(" intercept")]),t._v(" "),e("p",[t._v("用来在任何变化应用前将其拦截。")]),t._v(" "),e("p",[t._v("方法内部调用 "),e("code",[t._v("registerInterceptor")]),t._v("，"),e("code",[t._v("registerInterceptor")]),t._v(" 函数内部会判断实例上是否存在 "),e("code",[t._v("interceptors")]),t._v("，如果不存在，则赋为 "),e("code",[t._v("[]")]),t._v("，并把 "),e("code",[t._v("handler")]),t._v(" 存入 "),e("code",[t._v("interceptors")]),t._v("。最后返回一个函数，且该函数只能被调用一次。")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" registerInterceptor"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    interceptable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" IInterceptable"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    handler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" IInterceptor"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Lambda "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" idx "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" interceptors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("idx "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" interceptors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("splice")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("idx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("func"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Lambda")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Lambda "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" invoked "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("invoked"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n        invoked "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("func "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" any"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arguments"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br")])]),e("h4",{attrs:{id:"get"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get","aria-hidden":"true"}},[t._v("#")]),t._v(" get")]),t._v(" "),e("p",[t._v("返回当前值。")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// types/observablevalue.ts")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportObserved")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("dehanceValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// core/atom.ts")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportObserved")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportObserved")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// core/observable.ts")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportObserved")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("observable")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("h5",{attrs:{id:"reportobserved"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reportobserved","aria-hidden":"true"}},[t._v("#")]),t._v(" reportObserved")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("首先获取全局对象中 "),e("code",[t._v("trackingDerivation")]),t._v("，并赋给 "),e("code",[t._v("derivation")]),t._v("。以 "),e("code",[t._v("autorun")]),t._v(" 举例，当使用 "),e("code",[t._v("autorun")]),t._v(" 的时候，会在全局对象中 "),e("code",[t._v("trackingDerivation")]),t._v(" 赋实例化后的 "),e("code",[t._v("Reaction")])])]),t._v(" "),e("li",[e("p",[t._v("判断 "),e("code",[t._v("derivation")]),t._v(" 是否有值")]),t._v(" "),e("ul",[e("li",[t._v("有，判断 "),e("code",[t._v("derivation")]),t._v(" 上 "),e("code",[t._v("runId")]),t._v(" 与实例的 "),e("code",[t._v("lastAccessedBy")]),t._v(" 是否相等，相等则代表依赖已经建立过，不需要再次创建，没有则把 "),e("code",[t._v("derivation.runId")]),t._v(" 赋给 "),e("code",[t._v("lastAccessedBy")]),t._v("，然后把实例放入 "),e("code",[t._v("derivation")]),t._v("。判断当前实例是否已处于监听状态，如果已经处于，则返回 "),e("code",[t._v("true")]),t._v("，如果不是则把实例上 "),e("code",[t._v("isBeingObserved")]),t._v(" 值改为 "),e("code",[t._v("true")]),t._v("，并调用实例的 "),e("code",[t._v("onBecomeObserved")]),t._v(" 方法")]),t._v(" "),e("li",[t._v("无，且实例上无 "),e("code",[t._v("observers")]),t._v(" ，当前已处于事务中，则把实例推入全局不再被观察队列 "),e("code",[t._v("pendingUnobservations")])]),t._v(" "),e("li",[t._v("无，且实例上有 "),e("code",[t._v("observers")]),t._v(" 或者当前未处于事务中，直接返回 "),e("code",[t._v("false")])])])])]),t._v(" "),e("h4",{attrs:{id:"set"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#set","aria-hidden":"true"}},[t._v("#")]),t._v(" set")]),t._v(" "),e("p",[t._v("替换当前存储的值并通知所有观察者。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(213),alt:"img"}})]),t._v(" "),e("ol",[e("li",[t._v("方法内部首先取到以前的值 "),e("code",[t._v("oldValue")]),t._v("，然后调用 "),e("code",[t._v("prepareNewValue")]),t._v(" 方法生成新值 "),e("code",[t._v("newValue")]),t._v("。")]),t._v(" "),e("li",[t._v("判断 "),e("code",[t._v("newValue")]),t._v(" 是否等于 "),e("code",[t._v("globalState.UNCHANGED")]),t._v("，如果等于什么都不做，如果不等于，则判断是否有监听器 "),e("code",[t._v("spy")]),t._v("，有则发送 "),e("code",[t._v("spyReportStart")]),t._v(" 事件，没有则什么都不做。")]),t._v(" "),e("li",[t._v("调用 "),e("code",[t._v("setNewValue")]),t._v(" 方法")]),t._v(" "),e("li",[t._v("有监听器则发送 "),e("code",[t._v("spyReportEnd")]),t._v(" 事件")])]),t._v(" "),e("h4",{attrs:{id:"tojson"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tojson","aria-hidden":"true"}},[t._v("#")]),t._v(" toJSON")]),t._v(" "),e("p",[t._v("返回 "),e("code",[t._v("this.get()")])]),t._v(" "),e("h4",{attrs:{id:"setnewvalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setnewvalue","aria-hidden":"true"}},[t._v("#")]),t._v(" setNewValue")]),t._v(" "),e("ol",[e("li",[t._v("原来的值更新成传入的值")]),t._v(" "),e("li",[t._v("调用 "),e("code",[t._v("reportChanged")]),t._v(" 函数")]),t._v(" "),e("li",[t._v("判断是否有监听器 "),e("code",[t._v("listener")]),t._v("，如果有，调用 "),e("code",[t._v("notifyListeners")]),t._v(" 方法")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportChanged")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始处理事务，把全局 inBatch 值 + 1")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("startBatch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// derivation、reaction")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("propagateChanged")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结束处理事务")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("endBatch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("h5",{attrs:{id:"propagatechanged"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#propagatechanged","aria-hidden":"true"}},[t._v("#")]),t._v(" propagateChanged")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("propagateChanged")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("observable")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ol",[e("li",[t._v("判断当前 "),e("code",[t._v("observable.lowestObserverState")]),t._v(" 与 "),e("code",[t._v("IDerivationState.STALE")]),t._v(" 是否相等，相等则什么也不做。"),e("code",[t._v("IDerivationState.STALE")]),t._v(" 意味着自从最后一次的计算和衍生以来，值已经发生改变，下一次需要的时候需要重新计算")]),t._v(" "),e("li",[e("code",[t._v("IDerivationState.STALE")]),t._v(" 赋值给 "),e("code",[t._v("observable.lowestObserverState")])]),t._v(" "),e("li",[t._v("取到 "),e("code",[t._v("observable.observers")]),t._v("，如果有，则遍历每一项，并判断每一项的 "),e("code",[t._v("dependenciesState")]),t._v(" 与 "),e("code",[t._v("IDerivationState.UP_TO_DATE")]),t._v(" 是否相等。如果不等，则把每一项的 "),e("code",[t._v("dependenciesState")]),t._v(" 全都设置为 "),e("code",[t._v("IDerivationState.STALE")]),t._v("。否则调用 "),e("code",[t._v("onBecomeStale")]),t._v("，执行所有的 "),e("code",[t._v("reaction")])])]),t._v(" "),e("h5",{attrs:{id:"endbatch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#endbatch","aria-hidden":"true"}},[t._v("#")]),t._v(" endBatch")]),t._v(" "),e("p",[t._v("判断 "),e("code",[t._v("--global.inBatch")]),t._v(" 是否等于 "),e("code",[t._v("0")]),t._v("，如果是则什么也不做。否则，执行所有的 "),e("code",[t._v("reaction")]),t._v("。获取全局所有待取消观察的列表，把每一项 "),e("code",[t._v("isPendingUnobservation")]),t._v(" 都设置为 "),e("code",[t._v("false")]),t._v("。如果 "),e("code",[t._v("observable.observers.length")]),t._v(" 为 "),e("code",[t._v("0")]),t._v("，且 "),e("code",[t._v("observable")]),t._v(" 处于观察状态，则标记 "),e("code",[t._v("observable")]),t._v(" 为不可观察。如果 "),e("code",[t._v("observable")]),t._v(" 为 "),e("code",[t._v("ComputedValue")]),t._v(" 的实例，则调用 "),e("code",[t._v("observable.suspend")]),t._v("，最后清空全局所有待取消观察列表。")]),t._v(" "),e("h4",{attrs:{id:"tostring"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tostring","aria-hidden":"true"}},[t._v("#")]),t._v(" toString")]),t._v(" "),e("p",[t._v("返回 "),e("code",[t._v("${this.name}[${this.value}]")])]),t._v(" "),e("h4",{attrs:{id:"valueof"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#valueof","aria-hidden":"true"}},[t._v("#")]),t._v(" valueOf")]),t._v(" "),e("p",[t._v("返回 "),e("code",[t._v("toPrimitive(this.get())")])]),t._v(" "),e("h4",{attrs:{id:"dehancevalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dehancevalue","aria-hidden":"true"}},[t._v("#")]),t._v(" dehanceValue")]),t._v(" "),e("p",[t._v("如果有 "),e("code",[t._v("dehancer")]),t._v("，则返回调用 "),e("code",[t._v("dehancer")]),t._v(" 方法后的值，否则直接返回值")]),t._v(" "),e("h4",{attrs:{id:"preparenewvalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#preparenewvalue","aria-hidden":"true"}},[t._v("#")]),t._v(" prepareNewValue")]),t._v(" "),e("p",[t._v("值得一提的是，方法内部会首先判断是否有拦截器 "),e("code",[t._v("interceptor")]),t._v("。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("如果有则会依次调用拦截器方法，并判断拦截器是否返回对象或 nothing，如果不是则报错；如果是 nothing，则直接返回，下面的拦截器不再调用；如果是对象，则继续调用接下来的拦截器。")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" interceptChange"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    interceptable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" IInterceptable"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    change"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" prevU "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("untrackedStart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" interceptors "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" interceptable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interceptors\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("interceptors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" l "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" interceptors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" l"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                change "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" interceptors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("change"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("invariant")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("change "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("change "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" any"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Intercept handlers should return nothing or a change object"')]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("change"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" change\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("untrackedEnd")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevU"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br")])]),e("p",[t._v("如果返回的 "),e("code",[t._v("change")]),t._v(" 为 nothing，则直接返回 "),e("code",[t._v("globalState.UNCHANGED")]),t._v("，否则取 "),e("code",[t._v("change.newValue")]),t._v(" 作为新值。接下来方法和没有拦截器走的逻辑一致。")])]),t._v(" "),e("li",[e("p",[t._v("如果没有拦截器，则调用 "),e("code",[t._v("enhancer")]),t._v(" 方法生成新值，最后判断旧值与新值是否相等，如果相等返回 "),e("code",[t._v("globalState.UNCHANGED")]),t._v("，否则返回新值。")])])]),t._v(" "),e("h2",{attrs:{id:"isobservablevalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#isobservablevalue","aria-hidden":"true"}},[t._v("#")]),t._v(" isObservableValue")]),t._v(" "),e("p",[e("code",[t._v("isObservableValue")]),t._v(" 函数是 "),e("code",[t._v("createInstanceofPredicate")]),t._v(" 函数返回值。")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" isObservableValue "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createInstanceofPredicate")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ObservableValue"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ObservableValue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"结尾语"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#结尾语","aria-hidden":"true"}},[t._v("#")]),t._v(" 结尾语")]),t._v(" "),e("p",[e("code",[t._v("mox")]),t._v(" 源码阅读起来，很难理解，需要细细品尝。如果觉得写得好不错，还请鼓励下，点个👍。")]),t._v(" "),e("comment-comment")],1)}),[],!1,null,null,null);s.default=n.exports}}]);